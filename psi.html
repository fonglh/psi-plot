<!DOCTYPE html>
<html>
	<head>
		<title>Singapore PSI Readings</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
		<link href="css/bootstrap-responsive.css" rel="stylesheet">
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
		<script src="highstock.js"></script>
		<script src="highcharts-more.js"></script>
		<script src="js/bootstrap.min.js"></script>

		<script>
		$(function() {
			Highcharts.setOptions({
				global: {
					useUTC: false
				}
			});


			$.getJSON('http://localhost/psi/psijson.php?query=psi3hr-all&callback=?', function( data ) {
				chart1 = new Highcharts.StockChart({
					chart: {
						renderTo: 'psi_container',
					},
					rangeSelector: {
						selected: 1
					},

					title: {
						text: 'PSI Readings'
					},

					legend: {
						enabled: true,
						align: 'center',
						verticalAlign: 'bottom',
						borderWidth: 2,
						itemMarginBottom: 10,
					},

					rangeSelector: {
						buttons: [
						{
							type: 'day',
							count: 7,
							text: '7d'
						}, 
						{
							type: 'day',
							count: 3,
							text: '3d'
						},
						{
							type: 'day',
							count: 1,
							text: '1d'
						},
						{
							type: 'all',
							text: 'All'
						}
						],
						selected: 2
					},

					xAxis: {
						ordinal: false
					},

					yAxis: {
						title: {
							text: 'PSI'
						},

						plotBands: [
						{
							from: 0,
							to: 50,
							color: 'rgba(0, 255, 0, 0.7)',
							label: { text: 'Good' }
						},
						{
							from: 51,
							to: 100,
							color: 'rgba(128, 255, 0, 0.7)',
							label: { text: 'Moderate' }
						},
						{
							from: 101,
							to: 200,
							color: 'rgba(255, 255, 0, 0.7)',
							label: { text: 'Unhealthy' }
						},
						{
							from: 201,
							to: 300,
							color: 'rgba(255, 128, 0, 0.7)',
							label: { text: 'Very unhealthy' }
						},
						{
							from: 301,
							to: 500,
							color: 'rgba(255, 0, 0, 0.7)',
							label: { text: 'Hazardous' }
						}
						]

					},

					series: [{
						name: '3-hr PSI Reading',
						data: data
					}]
				});

			});

			


		});
		</script>

	</head>

	<body>
		<div id="psi_container" style="width:100%; height:400px;"></div>
	</body>
</html>
